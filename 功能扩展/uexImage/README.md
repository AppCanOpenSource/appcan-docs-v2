[TOC]

# 1ã€ç®€ä»‹ [![](http://appcan-download.oss-cn-beijing.aliyuncs.com/%E5%85%AC%E6%B5%8B%2Fgf.png)]()

å›¾ç‰‡æ’ä»¶

## 1.1ã€è¯´æ˜
å°è£…äº†å›¾ç‰‡çš„ç›¸å…³åŠŸèƒ½:æ‚¨å¯ä»¥ä½¿ç”¨è¯¥æ’ä»¶è¿›è¡Œé€‰æ‹©.å¯¼å‡ºã€è£å‰ªã€æµè§ˆã€å­˜å…¥ç³»ç»Ÿç›¸å†Œç­‰ä¸€ç³»åˆ—é’ˆå¯¹å›¾ç‰‡çš„æ“ä½œ.
## 1.2ã€UIå±•ç¤º
 ![](/docImg/975/093141n2015r11c2vt&#40;2&#41;.png)  ![](/docImg/975/093145g2015m11b2se&#40;2&#41;.png) 
## 1.3ã€å¼€æºæºç 
[ç‚¹å‡»](http://plugin.appcan.cn/details.html?id=505_index)è‡³æ’ä»¶è¯¦æƒ…é¡µ(æ’ä»¶æµ‹è¯•ç”¨ä¾‹ä¸æ’ä»¶åŒ…å·²ç»æä¾›)
## 1.4ã€å¹³å°ç‰ˆæœ¬æ”¯æŒ
æœ¬æ’ä»¶çš„æ‰€æœ‰APIé»˜è®¤æ”¯æŒ**Android4.0+**å’Œ**iOS7.0+**æ“ä½œç³»ç»Ÿ.  
æœ‰ç‰¹æ®Šç‰ˆæœ¬è¦æ±‚çš„APIä¼šåœ¨æ–‡æ¡£ä¸­é¢å¤–è¯´æ˜.

## 1.5ã€æ¥å£æœ‰æ•ˆæ€§
æœ¬æ’ä»¶æ‰€æœ‰APIé»˜è®¤åœ¨æ’ä»¶ç‰ˆæœ¬**4.0.0+**å¯ç”¨.  
åœ¨åç»­ç‰ˆæœ¬ä¸­æ–°æ·»åŠ çš„æ¥å£ä¼šåœ¨æ–‡æ¡£ä¸­é¢å¤–è¯´æ˜.


#2ã€ APIé¢„è§ˆ

##2.1ã€ æ–¹æ³•

### ğŸ­ openPicker æ‰“å¼€ç…§ç‰‡é€‰æ‹©å™¨

`uexImage.openPicker(param,callback);`

**è¯´æ˜**

* æ‰“å¼€ä¸€ä¸ªå¯ä»¥é€‰æ‹©æœ¬åœ°ç›¸å†Œå›¾ç‰‡çš„é€‰æ‹©å™¨,å¯¼å‡ºæ‰€é€‰å›¾ç‰‡,å¹¶è¿”å›å›¾ç‰‡è·¯å¾„
* é»˜è®¤å¯¼å‡ºå›¾ç‰‡çš„æ ¼å¼ä¸ºjpg

**å‚æ•°**

| å‚æ•°åç§°     | å‚æ•°ç±»å‹     | æ˜¯å¦å¿…é€‰ | è¯´æ˜             |
| -------- | -------- | ---- | -------------- |
| param    | String   | å¦    | pickerå‚æ•°è®¾ç½®     |
| callback | Function | å¦    | pickerè¢«å…³é—­çš„å›è°ƒå‡½æ•° |

```javascript
var param = {
  min:,
  max:,
  quality:,
  usePng:,
  detailedInfo
}
```

å„å­—æ®µå«ä¹‰å¦‚ä¸‹:

| å‚æ•°åç§°         | å‚æ•°ç±»å‹    | æ˜¯å¦å¿…é€‰ | è¯´æ˜                                | é»˜è®¤å€¼   |
| ------------ | ------- | ---- | --------------------------------- | ----- |
| min          | Number  | å¦    | æœ€å°é€‰æ‹©æ•°é‡ ,ä¼ 0è¡¨ç¤ºæ— é™åˆ¶                   | 1     |
| max          | Number  | å¦    | æœ€å¤§é€‰æ‹©æ•°é‡ ,ä¼ 0è¡¨ç¤ºæ— é™åˆ¶                   | 0     |
| quality      | Number  | å¦    | JPGå‹ç¼©è´¨é‡ å–å€¼èŒƒå›´ 0-1 è¶Šå¤§è¡¨ç¤ºè´¨é‡è¶Šå¥½         | 0.5   |
| usePng       | Boolean | å¦    | ç”¨pngæ ¼å¼å¯¼å‡ºå›¾ç‰‡ ,æ­¤å‚æ•°ä¸ºtrueæ—¶,qualityå‚æ•°æ— æ•ˆ | false |
| detailedInfo | Boolean | å¦    | æ­¤å‚æ•°ä¸ºtrueæ—¶,å›è°ƒä¸­ä¼šåŒ…å«å›¾ç‰‡çš„é¢å¤–ä¿¡æ¯           | false |

* png æ— æŸä¸”æ”¯æŒé€æ˜è‰²,ä½†æ–‡ä»¶ä½“ç§¯æ¯”jpgå¤§.
* ç”¨æˆ·åº”æŒ‰éœ€æ±‚è‡ªè¡Œé€‰æ‹©å›¾ç‰‡æ–‡ä»¶æ ¼å¼


**å›è°ƒå‚æ•°**

```javascript
var callback = function(error,info){
}
```

| å‚æ•°åç§°  | ç±»å‹     | è¯´æ˜                    |
| ----- | ------ | --------------------- |
| info  | Object | è¿”å›çš„æ•°æ®ä¿¡æ¯,å½¢å¼è§ä¸‹:         |
| error | Number | 0ä¸ºæˆåŠŸ,-1ä¸ºç‚¹å‡»å–æ¶ˆè€Œå…³é—­,å…¶ä»–ä¸ºå¤±è´¥ |

```javascript
var info = {
  detailedImageInfo:,
  data:
}
```

å„å­—æ®µå«ä¹‰å¦‚ä¸‹:

| å‚æ•°åç§°              | å‚æ•°ç±»å‹  | æ˜¯å¦å¿…é€‰                                     | è¯´æ˜                          |
| ----------------- | ----- | ---------------------------------------- | --------------------------- |
| detailedImageInfo | Array | å¦ ,ä»…openPickeræœ‰è®¾ç½®detailedInfoä¸ºtrueæ—¶æ‰æœ‰æ­¤å‚æ•° | å¯¼å‡ºçš„å›¾ç‰‡çš„ä¿¡æ¯uexImageInfoç»“æ„æ„æˆçš„æ•°ç»„ |
| data              | Array | å¦                                        | å¯¼å‡ºçš„å›¾ç‰‡åœ°å€æ„æˆçš„æ•°ç»„                |

* å³ä½¿åªé€‰æ‹©ä¸€å¼ å›¾ç‰‡ detailedImageInfoå’ŒimageInfoä¹Ÿæ˜¯æ•°ç»„
* uexImageInfoç»“æ„å¦‚ä¸‹å®šä¹‰

```
var uexImageInfo={
	localPath:,//String,å¿…é€‰,å›¾ç‰‡åœ°å€
	timestamp:,//Number,å¯é€‰,å›¾ç‰‡åˆ›å»ºæ—¶é—´çš„10ä½æ—¶é—´æˆ³ (æ­¤å‚æ•°è¯»å–è‡ªå›¾ç‰‡çš„EXIFæ•°æ®,å¦‚æ— æ³•è·å–æˆ–ä¸å­˜åœ¨,åˆ™æ— æ­¤å‚æ•°)
	longitude:,//Number,å¯é€‰,å›¾ç‰‡æ‹æ‘„åœ°ç‚¹çš„ç»åº¦ (æ­¤å‚æ•°è¯»å–è‡ªå›¾ç‰‡çš„EXIFæ•°æ®,å¦‚æ— æ³•è·å–æˆ–ä¸å­˜åœ¨,åˆ™æ— æ­¤å‚æ•°)
	latitude:,//Number,å¯é€‰,å›¾ç‰‡æ‹æ‘„åœ°ç‚¹çš„çº¬åº¦ (æ­¤å‚æ•°è¯»å–è‡ªå›¾ç‰‡çš„EXIFæ•°æ®,å¦‚æ— æ³•è·å–æˆ–ä¸å­˜åœ¨,åˆ™æ— æ­¤å‚æ•°)
	altitude:,//Number,å¯é€‰,å›¾ç‰‡æ‹æ‘„åœ°ç‚¹çš„æµ·æ‹” (æ­¤å‚æ•°è¯»å–è‡ªå›¾ç‰‡çš„EXIFæ•°æ®,å¦‚æ— æ³•è·å–æˆ–ä¸å­˜åœ¨,åˆ™æ— æ­¤å‚æ•°)
}
```

**ç¤ºä¾‹**

```javascript
var data = {
	min:2,
	max:3,
	quality:0.8,
	detailedInfo:true
}
uexImage.openPicker(data,function(error,info){
	if(error==-1){
		alert("cancelled!");
	}else if(error==0){
		alert(info.data);
		if(info.detailedImageInfo){
			alert(JSON.stringify(info.detailedImageInfo));
		}
	}else{
      	alert("error");
	}
});
```

### ğŸ­ openBrowser æ‰“å¼€å›¾ç‰‡æµè§ˆå™¨

`uexImage.openBrowser(param,callback);`

**è¯´æ˜**

* æ‰“å¼€ä¸€ä¸ªå¯ä»¥æµè§ˆå›¾ç‰‡çš„æµè§ˆå™¨
* å›¾ç‰‡è·¯å¾„æ”¯æŒ wgt:// wgts:// res:// file:// http:// https:// 


**å‚æ•°**

| å‚æ•°åç§°     | å‚æ•°ç±»å‹     | æ˜¯å¦å¿…é€‰ | è¯´æ˜              |
| -------- | -------- | ---- | --------------- |
| param    | String   | æ˜¯    | browserå‚æ•°è®¾ç½®     |
| callback | Function | å¦    | browserè¢«å…³é—­çš„å›è°ƒå‡½æ•° |

```javascript
var param = {
  	displayActionButton:,
	displayNavArrows:,
	enableGrid:,
	startOnGrid:,
	startIndex:,
	data:[]
}
```

å„å­—æ®µå«ä¹‰å¦‚ä¸‹:

| å‚æ•°åç§°                | å‚æ•°ç±»å‹    | æ˜¯å¦å¿…é€‰ | è¯´æ˜                | é»˜è®¤å€¼   |
| ------------------- | ------- | ---- | ----------------- | ----- |
| displayActionButton | Boolean | å¦    | æ˜¾ç¤ºåˆ†äº«æŒ‰é’®            | false |
| displayNavArrows    | Boolean | å¦    | æ˜¾ç¤ºåˆ‡æ¢ç®­å¤´(ä»…iOSæ”¯æŒæ­¤å‚æ•°) | false |
| enableGrid          | Boolean | å¦    | å…è®¸ä¹å®«æ ¼è§†å›¾           | true  |
| startOnGrid         | Boolean | å¦    | ä»¥ä¹å®«æ ¼è§†å›¾èµ·å§‹          | false |
| startIndex          | Number  | å¦    | éè´Ÿæ•´æ•° èµ·å§‹å›¾ç‰‡ä½ç½®       | 0     |
| data                | Array   | æ˜¯    | å›¾ç‰‡èµ„æºæ„æˆçš„æ•°ç»„         | æ—      |

* å³ä½¿åªæµè§ˆä¸€å¼ å›¾ç‰‡ dataä¹Ÿå¿…é¡»æ˜¯æ•°ç»„
* dataå†…çš„å…ƒç´ å¯ä»¥æ˜¯ å­—ç¬¦ä¸² æˆ–è€…æ˜¯ Jsonå¯¹è±¡ æ ¼å¼
  * ä¼ å­—ç¬¦ä¸²æ—¶,æ­¤å­—ç¬¦ä¸²åº”ä¸ºå›¾ç‰‡èµ„æºè·¯å¾„
  * ä¼ Jsonå¯¹è±¡æ—¶, ç»“æ„å¦‚ä¸‹

```
{
	src:,//(String,å¿…é€‰)å›¾ç‰‡èµ„æºè·¯å¾„,æ”¯æŒ wgt:// wgts:// res:// file:// http:// https:// 
	thumb:,//(String,å¯é€‰)å›¾ç‰‡ç¼©ç•¥å›¾è·¯å¾„
	desc:,//(String,å¯é€‰) ä¸ºå›¾ç‰‡æ·»åŠ ä¸€æ®µæ–‡å­—æè¿°
	showBigPic:,//(Boolean å¯é€‰) æ˜¯å¦æ˜¾ç¤ºå¤§å›¾ï¼Œé»˜è®¤ä¸æ˜¾ç¤º
}
```
**å›è°ƒå‚æ•°**
â€‹	
å›è°ƒå‡½æ•°`callback`æ²¡æœ‰å‚æ•°


**ç¤ºä¾‹**

```javascript
var data ={
	displayActionButton:true,
	displayNavArrows:true,
	enableGrid:true,
	//startOnGrid:true,
	startIndex:2,
	data:["res://photo1.jpg",
		{
		src:"res://photo2.jpg",
		thumb:"res://photo2t.jpg",
		showBigPic: true
		},
		{
		src:"res://photo3.jpg",
		thumb:"res://photo3t.jpg",
		desc:"22222222222222"
		},
		{
		src:"http://it-eproducts.com/images/3-1347760443.jpg",
		thumb:"res://photo4t.jpg",
		desc:"22222222222222"
		}]
}
uexImage.openBrowser(data,function(){
	alert("browser closed!");
});
```
### ğŸ­ openCropper æ‰“å¼€å›¾ç‰‡è£å‰ªå™¨

`uexImage.openCropper(param,callback);`

**è¯´æ˜**

* æ‰“å¼€ä¸€ä¸ªå›¾ç‰‡è£å‰ªå™¨,å¯¼å‡ºè£å‰ªåçš„å›¾ç‰‡,å¹¶è¿”å›å›¾ç‰‡è·¯å¾„
* æœ¬APIåªæœ‰è£å‰ªåŠŸèƒ½,è£å‰ªåçš„å›¾ç‰‡å¤§å°å³ä¸ºæ‰€è£å‰ªéƒ¨åˆ†åœ¨åŸå›¾ä¸­çš„å¤§å°

**å‚æ•°**

| å‚æ•°åç§°  | å‚æ•°ç±»å‹     | æ˜¯å¦å¿…é€‰ | è¯´æ˜              |
| ----- | -------- | ---- | --------------- |
| param | String   | å¦    | cropperå‚æ•°è®¾ç½®     |
| cb    | Function | å¦    | cropperè¢«å…³é—­çš„å›è°ƒå‡½æ•° |

```javascript
var param = {
  	src:,
  	quality:,
  	usePng:,
	mode:1
}
```

å„å­—æ®µå«ä¹‰å¦‚ä¸‹:

| å‚æ•°åç§°    | å‚æ•°ç±»å‹    | æ˜¯å¦å¿…é€‰ | è¯´æ˜                                       | é»˜è®¤å€¼   |
| ------- | ------- | ---- | ---------------------------------------- | ----- |
| src     | String  | å¦    | å›¾ç‰‡è·¯å¾„ æ”¯æŒwgt:// wgts:// file:// res://,ä¸ä¼ æ­¤å‚æ•°æ—¶,ä¼šå…ˆæ‰“å¼€ç³»ç»Ÿç›¸å†Œè®©ç”¨æˆ·é€‰æ‹©ä¸€å¼ å›¾ç‰‡ | æ—      |
| quality | Number  | å¦    | JPGå‹ç¼©è´¨é‡ å–å€¼èŒƒå›´ 0-1 è¶Šå¤§è¡¨ç¤ºè´¨é‡è¶Šå¥½                | 0.5   |
| usePng  | Boolean | å¦    | ç”¨pngæ ¼å¼å¯¼å‡ºå›¾ç‰‡ ,æ­¤å‚æ•°ä¸ºtrueæ—¶,qualityå‚æ•°æ— æ•ˆ        | false |
| mode    | Number  | å¦    | 1- æ­£æ–¹å‹è£å‰ª 2- åœ†å½¢è£å‰ª(ä»…iOSæ”¯æŒåœ†å½¢è£å‰ª)  4-çŸ©å½¢è£å‰ªï¼Œå®½é«˜æ¯”(4:3)  5-çŸ©å½¢è£å‰ªï¼Œå®½é«˜æ¯”(16:9)   6-çŸ©å½¢è£å‰ªï¼Œå®½é«˜è‡ªç”±ç¼©æ”¾         | 1     |

**å›è°ƒå‚æ•°**

```
var callback = function(error,info){}
```

| å‚æ•°åç§°  | ç±»å‹     | è¯´æ˜                  |
| ----- | ------ | ------------------- |
| info  | Object | è¿”å›å›¾ç‰‡ç›¸å…³ä¿¡æ¯,å½¢å¼è§ä¸‹:      |
| error | Number | 0è¡¨ç¤ºæˆåŠŸ,-1è¡¨ç¤ºå–æ¶ˆ,å…¶ä»–è¡¨ç¤ºå¤±è´¥ |

```javascript
var info = {
  isCancelled:,
  data:
}
```

å„å­—æ®µå«ä¹‰å¦‚ä¸‹:

| å‚æ•°åç§°        | å‚æ•°ç±»å‹    | æ˜¯å¦å¿…é€‰ | è¯´æ˜              |
| ----------- | ------- | ---- | --------------- |
| isCancelled | Boolean | æ˜¯    | é€‰æ‹©å™¨æ˜¯å¦æ˜¯ç”±äºç‚¹å‡»å–æ¶ˆè€Œå…³é—­ |
| data        | String  | å¦    | è£å‰ªåçš„å›¾ç‰‡åœ°å€        |


**ç¤ºä¾‹**

```javascript
var data={
	src:"res://photo5.jpg",
	mode:2
}
uexImage.openCropper(data,function(error,info){
	if(error==-1){
		alert("cancelled!");
	}else if(error==0) {
		alert(info.data);
	
	}
});
```

### ğŸ­ saveToPhotoAlbum å‚¨å­˜åˆ°ç›¸å†Œ

`uexImage.saveToPhotoAlbum(param,callback);`

**è¯´æ˜**

* å°†æœ¬åœ°å›¾ç‰‡å‚¨å­˜åˆ°ç³»ç»Ÿç›¸å†Œ

**å‚æ•°**


| å‚æ•°åç§°     | å‚æ•°ç±»å‹     | æ˜¯å¦å¿…é€‰ | è¯´æ˜      |
| -------- | -------- | ---- | ------- |
| param    | String   | æ˜¯    | å‚¨å­˜å‚æ•°è®¾ç½®  |
| callback | Function | å¦    | å‚¨å­˜çš„å›è°ƒå‡½æ•° |

paramä¸ºjsonå­—ç¬¦ä¸²,åŒ…å«çš„å‚æ•°å¦‚ä¸‹

| å‚æ•°åç§°      | å‚æ•°ç±»å‹   | æ˜¯å¦å¿…é€‰ | è¯´æ˜                                   |
| --------- | ------ | ---- | ------------------------------------ |
| localPath | String | æ˜¯    | å›¾ç‰‡è·¯å¾„ æ”¯æŒres:// wgt:// wgts:// file:// |


**å›è°ƒå‚æ•°**

```javascript
var callback = function(error,errorInfo){
}
```

| å‚æ•°åç§°      | å‚æ•°ç±»å‹   | æ˜¯å¦å¿…é€‰ | è¯´æ˜                             |
| --------- | ------ | ---- | ------------------------------ |
| error     | Number | æ˜¯    | ä¸º0è¡¨ç¤ºå‚¨å­˜æˆåŠŸ,é0è¡¨ç¤ºå‚¨å­˜å¤±è´¥              |
| errorInfo | String | å¦    | å‚¨å­˜å¤±è´¥çš„é”™è¯¯ä¿¡æ¯.å‚¨å­˜æˆåŠŸæ—¶,errorInfoä¸ºnull |



**ç¤ºä¾‹**

```javascript
var data={
	localPath:"res://photo4.jpg",
}
uexImage.saveToPhotoAlbum(data,function(err,errStr){
	if(!err){
		alert("å‚¨å­˜æˆåŠŸ!");
	}else{
		alert("å‚¨å­˜å¤±è´¥:" + errStr);
	}
});
```
### ğŸ­ clearOutputImages æ¸…é™¤ç”±æœ¬æ’ä»¶å¯¼å‡ºçš„æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶

`uexImage.clearOutputImages();`

**è¯´æ˜**

* æ¸…é™¤ç”±æœ¬æ’ä»¶çš„openPickerã€openCropperæ¥å£æ‰€ç”Ÿæˆçš„å›¾ç‰‡æ–‡ä»¶
* è‹¥æ‚¨çš„APPæœ‰å¤šä¸ªwidget,åˆ™åªä¼šæ¸…é™¤ç”±å½“å‰widgetæ‰€ç”Ÿæˆçš„å›¾ç‰‡æ–‡ä»¶


**å‚æ•°**

æ— 

**è¿”å›å€¼**

æœ¬æ–¹æ³•æœ‰ä¸€ä¸ªBooleanç±»å‹çš„è¿”å›å€¼,ä»£è¡¨æ¸…é™¤æ“ä½œæ˜¯å¦æˆåŠŸ


**ç¤ºä¾‹**

```javascript
var ret = uexImage.clearOutputImages();
alert(ret);
```

### ğŸ­ setIpadPopEnable è®¾ç½®iPadæ˜¯å¦å¯ç”¨popçª—å£

`uexImage.setIpadPopEnable(flag);`

**è¯´æ˜**

* æ’ä»¶åœ¨iPadä¸Šé»˜è®¤ç”¨popçª—å£å±•ç¤ºæ’ä»¶é¡µé¢,
* é€šè¿‡è°ƒç”¨æ­¤æ¥å£,å¯ä»¥é€‰æ‹©æ˜¯å¦ç¦ç”¨popçª—å£,æ”¹ç”¨å…¨å±å±•ç¤ºæ’ä»¶é¡µé¢.

**å‚æ•°**

| å‚æ•°åç§° | å‚æ•°ç±»å‹   | æ˜¯å¦å¿…é€‰ | è¯´æ˜                        |
| ---- | ------ | ---- | ------------------------- |
| flag | Number | æ˜¯    | ä¸º0æ—¶è¡¨ç¤ºç¦ç”¨popçª—å£,é0æ—¶è¡¨ç¤ºå¯ç”¨popçª—å£ |

**å¹³å°æ”¯æŒ**

ä»… iOS 7.0+ 

**ç¤ºä¾‹**

```javascript
uexImage.setIpadPopEnable(0);
```


# 3ã€æ›´æ–°å†å²

### iOS

APIç‰ˆæœ¬: `uexImage-4.0.0`

æœ€è¿‘æ›´æ–°æ—¶é—´:`2016-5-10`

| å†å²å‘å¸ƒç‰ˆæœ¬ | æ›´æ–°å†…å®¹                                     |
| ------ | ---------------------------------------- |

### Android

APIç‰ˆæœ¬: `uexImage-4.0.0`

æœ€è¿‘æ›´æ–°æ—¶é—´:`2016-5-17`

| å†å²å‘å¸ƒç‰ˆæœ¬ | æ›´æ–°å†…å®¹                                |
| ------ | ----------------------------------- |
