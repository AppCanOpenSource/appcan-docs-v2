[TOC]
# 1ï½¤ç®€ä»‹ [![](http://appcan-download.oss-cn-beijing.aliyuncs.com/%E5%85%AC%E6%B5%8B%2Fgf.png)]()
æ–‡ä»¶ä¸‹è½½æ’ä»¶
## 1.1ï½¤è¯´æ˜
æ–‡ä»¶ä¸‹è½½ç®¡ç†æ¥å£API,è¯¥å¯¹è±¡ä¸»è¦å°è£…äº†ä¸‹è½½æ•°æ®çš„æ¥å£,æ”¯æŒå¤šä¸ªæ–‡ä»¶ä¸‹è½½,æ–­ç‚¹ç»­ä¼ ä¸‹è½½,ä¸‹è½½æ–‡ä»¶å¤§å°æ— é™åˆ¶.

## 1.2ï½¤UIå±•ç¤º
![](http://newdocx.appcan.cn/docximg/133313p2015r6s16g.png)

## 1.3ï½¤å¼€æºæºç 
æ’ä»¶æµ‹è¯•ç”¨ä¾‹ä¸æºç ä¸‹è½½:[ç‚¹å‡»](http://plugin.appcan.cn/details.html?id=169_index) æ’ä»¶ä¸­å¿ƒè‡³æ’ä»¶è¯¦æƒ…é¡µ (æ’ä»¶æµ‹è¯•ç”¨ä¾‹ä¸æ’ä»¶æºç å·²ç»æä¾›)

## 1.4ï½¤å¹³å°ç‰ˆæœ¬æ”¯æŒ
æœ¬æ’ä»¶çš„æ‰€æœ‰APIé»˜è®¤æ”¯æŒ**Android4.0+**å’Œ**iOS7.0+**æ“ä½œç³»ç»Ÿ.  
æœ‰ç‰¹æ®Šç‰ˆæœ¬è¦æ±‚çš„APIä¼šåœ¨æ–‡æ¡£ä¸­é¢å¤–è¯´æ˜.

## 1.5ï½¤æ¥å£æœ‰æ•ˆæ€§
æœ¬æ’ä»¶æ‰€æœ‰APIé»˜è®¤åœ¨æ’ä»¶ç‰ˆæœ¬**4.0.0+**å¯ç”¨.  
åœ¨åç»­ç‰ˆæœ¬ä¸­æ–°æ·»åŠ çš„æ¥å£ä¼šåœ¨æ–‡æ¡£ä¸­é¢å¤–è¯´æ˜.

# 2ï½¤APIæ¦‚è§ˆ
## 2.1ï½¤æ–¹æ³•
### ğŸ­ create åˆ›å»ºä¸‹è½½å¯¹è±¡

`uexDownloaderMgr.create()`

**è¯´æ˜:**

åˆ›å»ºä¸€ä¸ªä¸‹è½½å¯¹è±¡.

**å‚æ•°:**

æ— 

**è¿”å›å€¼:**

ä¸‹è½½å¯¹è±¡
åˆ›å»ºå¤±è´¥æ—¶è¿”å›null

**ç¤ºä¾‹:**

```
var downloader = uexDownloaderMgr.create();
if(!downloader){
	alert("åˆ›å»ºå¤±è´¥!");
}
```

### ğŸ­ setHeaders è®¾ç½®è¯·æ±‚å¤´

`uexDownloaderMgr.setHeaders(downloader, json)`

**è¯´æ˜:**

è®¾ç½®è¯·æ±‚å¤´

**å‚æ•°:**

| å‚æ•°åç§°       | å‚æ•°ç±»å‹    | æ˜¯å¦å¿…é€‰ | è¯´æ˜                                  |
| ---------- | ------- | ---- | ----------------------------------- |
| downloader | Object  | æ˜¯    | ç”±[create](# create åˆ›å»ºä¸‹è½½å¯¹è±¡)æ¥å£åˆ›å»ºçš„ä¸‹è½½å¯¹è±¡ |
| json       | JSONå­—ç¬¦ä¸² | æ˜¯    | è¯·æ±‚å¤´ä¿¡æ¯                               |

**ç¤ºä¾‹:**

```javascript
var downloader = ...//ç”±createæ¥å£åˆ›å»ºçš„ä¸‹è½½å¯¹è±¡
var headJson = '{"Content-type":"application/json;charset=utf-8"}';
uexDownloaderMgr.setHeaders(downloader, headJson);
```

### ğŸ­ download ä¸‹è½½æ–‡ä»¶

`uexDownloaderMgr.download(downloader,serverURL,savePath,mode,cb)`

**è¯´æ˜:**

å¼€å§‹ä¸‹è½½æ–‡ä»¶

**å‚æ•°:**

| å‚æ•°åç§°       | å‚æ•°ç±»å‹     | æ˜¯å¦å¿…é€‰ | è¯´æ˜                                  |
| ---------- | -------- | ---- | ----------------------------------- |
| downloader | Object   | æ˜¯    | ç”±[create](# create åˆ›å»ºä¸‹è½½å¯¹è±¡)æ¥å£åˆ›å»ºçš„ä¸‹è½½å¯¹è±¡ |
| serverURL  | String   | æ˜¯    | æœåŠ¡å™¨åœ°å€                               |
| savePath   | String   | æ˜¯    | æœ¬åœ°ä¿å­˜åœ°å€                              |
| mode       | Number   | æ˜¯    | æ˜¯å¦æ”¯æŒæ–­ç‚¹ç»­ä¼ ,0:ä¸æ”¯æŒ,1:æ”¯æŒ                 |
| cb         | Function | æ˜¯    | ä¸‹è½½è¿›åº¦å›è°ƒ,è¯¦è§ä¸‹                          |


**å›è°ƒå‚æ•°:**

```
var cb = function(fileSize,percent,status){}
```

| å‚æ•°åç§°     | å‚æ•°ç±»å‹   | æ˜¯å¦å¿…é€‰ | è¯´æ˜                         |
| -------- | ------ | ---- | -------------------------- |
| fileSize | Number | æ˜¯    | è¦ä¸‹è½½çš„æ–‡ä»¶å¤§å°                   |
| percent  | Number | æ˜¯    | ä¸‹è½½è¿›åº¦ç™¾åˆ†æ¯” å–å€¼ä¸º0~100           |
| status   | Number | æ˜¯    | ä¸‹è½½çŠ¶æ€ 0-ä¸‹è½½ä¸­ 1-ä¸‹è½½å®Œæˆ 2-ä¸‹è½½å‘ç”Ÿé”™è¯¯ |

**ç¤ºä¾‹:**

```javascript
var downloader = ...//ç”±createæ¥å£åˆ›å»ºçš„ä¸‹è½½å¯¹è±¡

uexDownloaderMgr.download(downloader,
	 "http://wallpaper.pocketdigi.com/upload/1/bigImage/1284565196.jpg", 
	 "wgt://data/down/1284565196.jpg",
	 1, 
	 function(fileSize, percent, status){
              switch (status) {
                  case 0:
                      document.getElementById('percentage').innerHTML = "æ–‡ä»¶å¤§å°:" + fileSize + "å­—èŠ‚<br>ä¸‹è½½è¿›åº¦:" + percent;
                      return;
                  break;
                  case 1:
                      alert("ä¸‹è½½å®Œæˆ");
                  break;
                  case 2:
                      alert("ä¸‹è½½å¤±è´¥");
                  break;
});
```

### ğŸ­ cancelDownload å–æ¶ˆä¸‹è½½

`uexDownloaderMgr.cancelDownload(serverURL,clearMode)`

**è¯´æ˜:**

å–æ¶ˆæŒ‡å®šä¸‹è½½åœ°å€çš„ä¸‹è½½ä»»åŠ¡

**å‚æ•°:**

| å‚æ•°åç§°      | å‚æ•°ç±»å‹   | æ˜¯å¦å¿…é€‰ | è¯´æ˜                                       |
| --------- | ------ | ---- | ---------------------------------------- |
| serverURL | String | æ˜¯    | æœåŠ¡å™¨ä¸‹è½½åœ°å€                                  |
| clearMode | Number | å¦    | é»˜è®¤ä¸º0.0-åªå–æ¶ˆæ­¤æ¬¡ä¸‹è½½ä»»åŠ¡,ä¸æ¸…é™¤å·²ç»ä¸‹è½½çš„ä¸´æ—¶æ–‡ä»¶. 1-å–æ¶ˆæ­¤æ¬¡ä¸‹è½½ä»»åŠ¡å¹¶æ¸…é™¤å·²ç»ä¸‹è½½çš„ä¸´æ—¶æ–‡ä»¶ |

â€‹    

**ç¤ºä¾‹:**

```
uexDownloaderMgr.cancelDownload("http://wallpaper.pocketdigi.com/upload/1/bigImage/1284565196.jpg");
```

### ğŸ­ closeDownloader å…³é—­ä¸‹è½½å¯¹è±¡

`uexDownloaderMgr.closeDownloader(downloader)`

**è¯´æ˜:**

å…³é—­ä¸‹è½½å¯¹è±¡

**å‚æ•°:**

| å‚æ•°åç§°       | å‚æ•°ç±»å‹   | æ˜¯å¦å¿…é€‰ | è¯´æ˜                                  |
| ---------- | ------ | ---- | ----------------------------------- |
| downloader | Object | æ˜¯    | ç”±[create](# create åˆ›å»ºä¸‹è½½å¯¹è±¡)æ¥å£åˆ›å»ºçš„ä¸‹è½½å¯¹è±¡ |



**ç¤ºä¾‹:**

```
var downloader = ...//ç”±createæ¥å£åˆ›å»ºçš„ä¸‹è½½å¯¹è±¡

uexDownloaderMgr.closeDownloader(downloader);
```

### ğŸ­ getInfo è·å–ä¸‹è½½å¯¹è±¡çš„ç›¸å…³ä¿¡æ¯

`uexDownloaderMgr.getInfo(serverURL)`

**è¯´æ˜:**

è·å–ä¸‹è½½å¯¹è±¡çš„ç›¸å…³ä¿¡æ¯

**å‚æ•°:**

| å‚æ•°åç§°      | å‚æ•°ç±»å‹   | æ˜¯å¦å¿…é€‰ | è¯´æ˜      |
| --------- | ------ | ---- | ------- |
| serverURL | String | æ˜¯    | æœåŠ¡å™¨ä¸‹è½½åœ°å€ |

**è¿”å›å€¼:**

è¿”å›å€¼infoæ˜¯JSON Objectç±»å‹,å½¢å¼å¦‚ä¸‹:

```javascript
var info = {
	savePath:,
	fileSize:,
	currentSize:,
	lastTime:
}
```

å„å­—æ®µå«ä¹‰å¦‚ä¸‹:

| å‚æ•°åç§°        | å‚æ•°ç±»å‹   | è¯´æ˜       |
| ----------- | ------ | -------- |
| savePath    | String | æ–‡ä»¶å­˜å‚¨è·¯å¾„   |
| fileSize    | Number | æ–‡ä»¶æ€»å¤§å°    |
| currentSize | Number | å·²ä¸‹è½½å¤§å°    |
| lastTime    | String | æ–‡ä»¶æœ€åä¿®æ”¹æ—¶é—´ |

**ç¤ºä¾‹:**

```
var info = uexDownloaderMgr.getInfo("http://wallpaper.pocketdigi.com/upload/1/bigImage/1284565196.jpg");
alert(JSON.stringify(info));
```


# 3ï½¤æ›´æ–°å†å²

### iOS

APIç‰ˆæœ¬: `uexDownloaderMgr-4.0.1`

æœ€è¿‘æ›´æ–°æ—¶é—´:`2017-02-21`

| å†å²å‘å¸ƒç‰ˆæœ¬ | æ›´æ–°å†…å®¹ |
| ----- | ----- |
| 4.0.1 | ä¿®å¤ä¸€ä¸ªä¼šå¯¼è‡´å´©æºƒçš„é—®é¢˜ |
| 4.0.0 | ä¸‹è½½åŠŸèƒ½æ’ä»¶ |

### Android

APIç‰ˆæœ¬: `uexDownloaderMgr-4.1.4`

æœ€è¿‘æ›´æ–°æ—¶é—´:`2017-02-21`

| å†å²å‘å¸ƒç‰ˆæœ¬ | æ›´æ–°å†…å®¹ |
| ----- | ----- |
| 4.1.4 | (éœ€è¦å¼•æ“4.1.0ä»¥ä¸Š)ä¿®å¤æŸäº›urlä¸èƒ½ä¸‹è½½çš„é—®é¢˜ |
| 4.1.3 | ä¿®å¤æœåŠ¡å™¨è¿”å›2XX(é200ï½¤206)å¯¼è‡´ä¸‹è½½å¤±è´¥çš„é—®é¢˜,å¹¶ä¿®æ”¹è‡ªåŠ¨å¤„ç†é‡å®šå‘ |
| 4.1.2 | (éœ€è¦å¼•æ“4.1.0ä»¥ä¸Š)ä¿®å¤ä¸èƒ½ä¸‹è½½ä¸­æ–‡é“¾æ¥çš„é—®é¢˜ |
| 4.0.1 | è§£å†³å›è°ƒè¿‡å¿«å¯¼è‡´å¡æ­»çš„é—®é¢˜ |
| 4.0.0 | 4.0æ”¹é€  |
